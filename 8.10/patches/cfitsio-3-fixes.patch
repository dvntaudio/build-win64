From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Kleis Auke Wolthuizen <github@kleisauke.nl>
Date: Mon, 27 Aug 2018 17:00:00 +0200
Subject: [PATCH 1/2] Install DLL in bin directory for Win32

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 1111111..2222222 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -21,6 +21,11 @@ OPTION (USE_PTHREADS "Thread-safe build (using pthreads)" OFF)
 
 set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}")
 set (LIB_DESTINATION "${CMAKE_INSTALL_PREFIX}/lib${LIB_SUFFIX}")
+IF(WIN32)
+  set(RUNTIME_DESTINATION ${CMAKE_INSTALL_PREFIX}/bin)
+ELSE()
+  set(RUNTIME_DESTINATION ${CMAKE_INSTALL_PREFIX}/lib)
+ENDIF()
 set (INCLUDE_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}/include/")
 
 # Define project version
@@ -119,7 +124,11 @@ ADD_LIBRARY(${LIB_NAME} ${LIB_TYPE} ${H_FILES} ${SRC_FILES})
 TARGET_LINK_LIBRARIES(${LIB_NAME} ${PTHREADS_LIBRARY} ${M_LIB} ${CURL_LIBRARIES})
 
 SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES VERSION ${${PROJECT_NAME}_VERSION} SOVERSION ${${PROJECT_NAME}_MAJOR_VERSION})
-install(TARGETS ${LIB_NAME} DESTINATION ${LIB_DESTINATION})
+install(TARGETS ${LIB_NAME}
+    ARCHIVE DESTINATION ${LIB_DESTINATION}
+    LIBRARY DESTINATION ${LIB_DESTINATION}
+    RUNTIME DESTINATION ${RUNTIME_DESTINATION}
+)
 install(FILES ${H_FILES} DESTINATION ${INCLUDE_INSTALL_DIR} COMPONENT Devel)
 
 ENABLE_TESTING()

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Kleis Auke Wolthuizen <github@kleisauke.nl>
Date: Thu, 2 May 2019 19:00:00 +0200
Subject: [PATCH 2/2] Create pkg-config file

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 1111111..2222222 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -151,3 +151,14 @@ if(MSVC)
     LINK_FLAGS "setargv.obj"
   )
 endif(MSVC)
+
+SET(prefix ${CMAKE_INSTALL_PREFIX})
+SET(exec_prefix "\${prefix}/bin")
+SET(libdir "\${prefix}/lib")
+SET(includedir "\${prefix}/include")
+SET(${PROJECT_NAME}_MAJOR ${${PROJECT_NAME}_MAJOR_VERSION})
+SET(${PROJECT_NAME}_MINOR ${${PROJECT_NAME}_MINOR_VERSION})
+SET(LIBS "${PTHREADS_LIBRARY} ${M_LIB} ${CURL_LIBRARIES}")
+
+CONFIGURE_FILE(cfitsio.pc.in ${CMAKE_CURRENT_BINARY_DIR}/cfitsio.pc @ONLY)
+INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/cfitsio.pc DESTINATION lib/pkgconfig)
